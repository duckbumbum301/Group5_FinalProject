<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Tài khoản — Vựa Vui Vẻ</title>
    <meta name="description" content="Trang tài khoản người dùng Vựa Vui Vẻ" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../assets/css/reviews.css" />
    <!-- Cache busting + no-cache for go live -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
  </head>
  <body>
    <header id="siteHeader" class="header"></header>

    <main class="section" aria-label="Trang Tài khoản">
      <div class="container" style="max-width: 1100px;">
        <div class="title"><h2>Tài khoản</h2></div>
        <div class="account-tabs">
          <nav class="account-nav">
            <button class="account-item active" id="acctNavProfile">
              <span>Sửa thông tin cá nhân</span>
              <span>›</span>
            </button>
            <button class="account-item" id="acctNavOrders">
              <span>Đơn hàng từng mua</span>
              <span>›</span>
            </button>
            <button class="account-item" id="acctNavSecurity">
              <span>Đổi mật khẩu</span>
              <span>›</span>
            </button>
          </nav>
          <div class="account-content">
            <section id="accountProfilePanel" class="account-panel">
              <form id="accountForm" class="contact" style="padding: 16px">
                <input class="input" type="text" name="name" placeholder="Họ và tên" autocomplete="name" required />
                <input class="input" type="email" name="email" placeholder="Email (không thay đổi sau đăng ký)" autocomplete="email" readonly aria-readonly="true" />
                <input class="input" type="tel" name="phone" placeholder="Số điện thoại (không thay đổi sau đăng ký)" autocomplete="tel" inputmode="numeric" pattern="\d{9,11}" title="Nhập 9–11 chữ số" readonly aria-readonly="true" />
                <p class="muted" id="acctAddrInline" role="status" aria-live="polite">Địa chỉ mặc định: </p>
                <textarea class="input" name="address" rows="3" placeholder="Địa chỉ giao hàng..." autocomplete="street-address" required></textarea>
                <button class="btn btn--pri" type="submit">Lưu thông tin</button>
                <p class="muted" id="accountMsg" role="status" aria-live="polite"></p>
              </form>
            </section>

            <section id="accountOrdersPanel" class="account-panel" hidden>
              <div id="accountOrdersBody" class="orders-body" style="padding: 16px"></div>
            </section>

            <section id="accountPasswordPanel" class="account-panel" hidden>
              <form id="changePasswordForm" class="contact" style="padding: 16px">
                <input class="input" type="password" name="current" placeholder="Mật khẩu hiện tại" autocomplete="current-password" required />
                <input class="input" type="password" name="new" placeholder="Mật khẩu mới" autocomplete="new-password" required />
                <input class="input" type="password" name="confirm" placeholder="Xác nhận mật khẩu mới" autocomplete="new-password" required />
                <button class="btn btn--pri" type="submit">Đổi mật khẩu</button>
                <p class="muted" id="pwMsg" role="status" aria-live="polite"></p>
              </form>
            </section>
          </div>
        </div>
        <div class="drawer__foot" style="margin-top: 16px;">
          <button class="btn btn--danger" id="btnLogout">Đăng xuất</button>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="sf-grid">
          <div class="sf-cols">
            <div class="sf-col">
              <h4>Trang chủ</h4>
              <ul>
                <li><a href="index.html#catalog">Sản phẩm</a></li>
                <li><a href="index.html#flashsale">Flash Sale</a></li>
                <li><a href="index.html#cart">Giỏ hàng</a></li>
              </ul>
            </div>
            <div class="sf-col">
              <h4>Về Vựa Vui Vẻ</h4>
              <ul>
                <li><a href="aboutus.html">Câu chuyện chúng tôi</a></li>
                <li><a href="index.html#values">Giá trị mang đến</a></li>
                <li><a href="index.html#mission">Sứ mệnh</a></li>
              </ul>
            </div>
            <div class="sf-col">
              <h4>Tài khoản</h4>
              <ul>
                <li><a href="../client/register.html">Đăng ký</a></li>
                <li><a href="../client/login.html">Đăng nhập</a></li>
              </ul>
            </div>
            <div class="sf-col">
              <h4>Liên hệ</h4>
              <ul>
                <li>Hotline</li>
                <li>Địa chỉ</li>
              </ul>
            </div>
            <div class="sf-legal">Điều khoản dịch vụ | Chính sách giao hàng | Chính sách đổi trả</div>
          </div>
          <div class="sf-brand">
            <img class="sf-logo" src="../images/brand/LogoVVV.png" alt="Vựa Vui Vẻ" />
            <div class="sf-contact">
              <div>Hotline: <span>012345678</span></div>
              <div>Địa chỉ liên hệ: <span>Vựa Vui Vẻ</span></div>
              <div>© <span id="year"></span> vựa vui vẻ</div>
            </div>
            <div class="sf-social">
              <div class="sf-social__label">Theo dõi chúng tôi</div>
              <a href="#" aria-label="Facebook" class="sf-social__btn">f</a>
              <a href="#" aria-label="Instagram" class="sf-social__btn">IG</a>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="../client/auth.js"></script>
    <script type="module" src="../js/header.js"></script>
    <script type="module" src="../js/account.js"></script>
    <script src="../assets/js/reviews.js"></script>
    <script>
      // Khởi tạo review UI cho danh sách đơn hàng
      window.addEventListener('DOMContentLoaded', function(){
        if (window.initReviews) {
          window.initReviews({ rootSelector: '#accountOrdersBody' });
        }
      });
    </script>
  </body>
</html>