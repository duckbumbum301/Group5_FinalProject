<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Tài khoản — Vựa Vui Vẻ</title>
    <meta name="description" content="Trang tài khoản người dùng Vựa Vui Vẻ" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../assets/css/reviews.css" />
    <!-- Cache busting + no-cache for go live -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
  </head>
  <body>
    <header class="header">
      <div class="container header__row">
        <a href="/html/index.html" class="logo" aria-label="Trang chủ Vựa Vui Vẻ"><img src="../images/brand/LogoVVV1.jpg" alt="Vựa Vui Vẻ" class="logo__img" /></a>
        <nav class="nav" aria-label="Điều hướng chính">
          <div class="nav-item nav-item--dropdown">
            <button
              class="nav-link nav-link--dropdown"
              id="productsMenuToggle"
              aria-expanded="false"
              aria-haspopup="true"
              aria-controls="productsMegaMenu"
            >
              Sản phẩm
              <svg
                class="nav-arrow"
                width="12"
                height="8"
                viewBox="0 0 12 8"
                fill="none"
                aria-hidden="true"
              >
                <path
                  d="M1 1.5L6 6.5L11 1.5"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>
            <div
              id="productsMegaMenu"
              class="mega-menu"
              role="menu"
              aria-labelledby="productsMenuToggle"
              hidden
            >
              <div class="mega-menu__content">
                <!-- Rau củ -->
                <div class="mega-menu__column">
                  <h3 class="mega-menu__title">Rau Củ</h3>
                  <ul class="mega-menu__list">
                    <li><a href="#catalog" class="mega-menu__link" data-category="veg" data-sub="leaf">Rau lá</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="veg" data-sub="root">Củ & rễ</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="veg" data-sub="fruit">Quả rau</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="veg" data-sub="cabbage">Họ cải</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="veg" data-sub="mushroom">Nấm</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="veg" data-sub="herb">Rau thơm & gia vị</a></li>
                  </ul>
                </div>
                <!-- Trái cây -->
                <div class="mega-menu__column">
                  <h3 class="mega-menu__title">Trái Cây</h3>
                  <ul class="mega-menu__list">
                    <li><a href="#catalog" class="mega-menu__link" data-category="fruit" data-sub="citrus">Cam quýt</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="fruit" data-sub="berry">Dâu & mọng</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="fruit" data-sub="tropical">Nhiệt đới</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="fruit" data-sub="melon">Dưa</a></li>
                  </ul>
                </div>
                <!-- Thịt cá -->
                <div class="mega-menu__column">
                  <h3 class="mega-menu__title">Thịt & Hải sản</h3>
                  <ul class="mega-menu__list">
                    <li><a href="#catalog" class="mega-menu__link" data-category="protein" data-sub="poultry">Gia cầm</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="protein" data-sub="beef">Thịt bò</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="protein" data-sub="pork">Thịt heo</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="protein" data-sub="seafood">Hải sản</a></li>
                  </ul>
                </div>
                <!-- Đồ ngọt & khô -->
                <div class="mega-menu__column">
                  <h3 class="mega-menu__title">Bánh kẹo & Khô</h3>
                  <ul class="mega-menu__list">
                    <li><a href="#catalog" class="mega-menu__link" data-category="sweet" data-sub="snack">Snack & bánh</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="sweet" data-sub="dried">Mứt & trái cây sấy</a></li>
                    <li><a href="#catalog" class="mega-menu__link" data-category="sweet" data-sub="cereal">Ngũ cốc & granola</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <a href="recipes.html">Công thức</a>
          <a href="aboutus.html">Giới thiệu</a>
        </nav>
        <div class="searchbox" role="search">
          <input
            id="searchInput"
            class="searchbox__input"
            type="search"
            placeholder="Search"
            aria-label="Tìm kiếm sản phẩm"
            autocomplete="on"
          />
          <button class="searchbox__btn" aria-label="Tìm">
            <svg class="searchbox__icon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" />
              <line x1="16.65" y1="16.65" x2="21" y2="21" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
        <div class="actions">
          <a class="btn btn--icon" id="accountBtn" href="account.html" aria-current="page">Tài khoản</a>
          <button
            class="btn btn--pri"
            id="cartOpenBtn"
            aria-haspopup="dialog"
            aria-controls="cartDrawer"
          >
            Giỏ hàng <span id="cartBadge" class="badge">0</span>
          </button>
        </div>
      </div>
    </header>

    <main class="section" aria-label="Trang Tài khoản">
      <div class="container" style="max-width: 1100px;">
        <div class="title"><h2>Tài khoản</h2></div>
        <div class="account-tabs">
          <nav class="account-nav">
            <button class="account-item active" id="acctNavProfile">
              <span>Sửa thông tin cá nhân</span>
              <span>›</span>
            </button>
            <button class="account-item" id="acctNavOrders">
              <span>Đơn hàng từng mua</span>
              <span>›</span>
            </button>
            <button class="account-item" id="acctNavSecurity">
              <span>Đổi mật khẩu</span>
              <span>›</span>
            </button>
          </nav>
          <div class="account-content">
            <section id="accountProfilePanel" class="account-panel">
              <form id="accountForm" class="contact" style="padding: 16px">
                <input class="input" type="text" name="name" placeholder="Họ và tên" autocomplete="name" required />
                <input class="input" type="email" name="email" placeholder="Email (không thay đổi sau đăng ký)" autocomplete="email" readonly aria-readonly="true" />
                <input class="input" type="tel" name="phone" placeholder="Số điện thoại (không thay đổi sau đăng ký)" autocomplete="tel" inputmode="numeric" pattern="\d{9,11}" title="Nhập 9–11 chữ số" readonly aria-readonly="true" />
                <p class="muted" id="acctAddrInline" role="status" aria-live="polite">Địa chỉ mặc định: </p>
                <textarea class="input" name="address" rows="3" placeholder="Địa chỉ giao hàng..." autocomplete="street-address" required></textarea>
                <button class="btn btn--pri" type="submit">Lưu thông tin</button>
                <p class="muted" id="accountMsg" role="status" aria-live="polite"></p>
              </form>
            </section>

            <section id="accountOrdersPanel" class="account-panel" hidden>
              <div id="accountOrdersBody" class="orders-body" style="padding: 16px"></div>
            </section>

            <section id="accountPasswordPanel" class="account-panel" hidden>
              <form id="changePasswordForm" class="contact" style="padding: 16px">
                <input class="input" type="password" name="current" placeholder="Mật khẩu hiện tại" autocomplete="current-password" required />
                <input class="input" type="password" name="new" placeholder="Mật khẩu mới" autocomplete="new-password" required />
                <input class="input" type="password" name="confirm" placeholder="Xác nhận mật khẩu mới" autocomplete="new-password" required />
                <button class="btn btn--pri" type="submit">Đổi mật khẩu</button>
                <p class="muted" id="pwMsg" role="status" aria-live="polite"></p>
              </form>
            </section>
          </div>
        </div>
        <div class="drawer__foot" style="margin-top: 16px;">
          <button class="btn btn--danger" id="btnLogout">Đăng xuất</button>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="sf-grid">
          <div class="sf-cols">
            <div class="sf-col">
              <h4>Trang chủ</h4>
              <ul>
                <li><a href="index.html#catalog">Sản phẩm</a></li>
                <li><a href="index.html#flashsale">Flash Sale</a></li>
                <li><a href="index.html#cart">Giỏ hàng</a></li>
              </ul>
            </div>
            <div class="sf-col">
              <h4>Về Vựa Vui Vẻ</h4>
              <ul>
                <li><a href="aboutus.html">Câu chuyện chúng tôi</a></li>
                <li><a href="index.html#values">Giá trị mang đến</a></li>
                <li><a href="index.html#mission">Sứ mệnh</a></li>
              </ul>
            </div>
            <div class="sf-col">
              <h4>Tài khoản</h4>
              <ul>
                <li><a href="../client/register.html">Đăng ký</a></li>
                <li><a href="../client/login.html">Đăng nhập</a></li>
              </ul>
            </div>
            <div class="sf-col">
              <h4>Liên hệ</h4>
              <ul>
                <li>Hotline</li>
                <li>Địa chỉ</li>
              </ul>
            </div>
            <div class="sf-legal">Điều khoản dịch vụ | Chính sách giao hàng | Chính sách đổi trả</div>
          </div>
          <div class="sf-brand">
            <img class="sf-logo" src="../images/brand/LogoVVV.png" alt="Vựa Vui Vẻ" />
            <div class="sf-contact">
              <div>Hotline: <span>012345678</span></div>
              <div>Địa chỉ liên hệ: <span>Vựa Vui Vẻ</span></div>
              <div>© <span id="year"></span> vựa vui vẻ</div>
            </div>
            <div class="sf-social">
              <div class="sf-social__label">Theo dõi chúng tôi</div>
              <a href="#" aria-label="Facebook" class="sf-social__btn">f</a>
              <a href="#" aria-label="Instagram" class="sf-social__btn">IG</a>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="../client/auth.js"></script>
    <script type="module" src="../js/account.js"></script>
    <!-- Khởi tạo mega menu để giữ trải nghiệm menu "Sản phẩm" -->
    <script type="module">
      import { bindMegaMenu } from '../js/menu.js';
      bindMegaMenu();
    </script>
    <script src="../assets/js/reviews.js"></script>
    <script>
      // Khởi tạo review UI cho danh sách đơn hàng
      window.addEventListener('DOMContentLoaded', function(){
        if (window.initReviews) {
          window.initReviews({ rootSelector: '#accountOrdersBody' });
        }
      });
    </script>
  </body>
</html>